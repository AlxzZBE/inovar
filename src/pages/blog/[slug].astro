---
import { getCollection } from "astro:content";

const posts = await getCollection("blog");
const { slug } = Astro.params;
const post = posts.find((p) => p.slug === slug);

if (!post) {
  throw new Error(`Post "${slug}" não encontrado!`);
}
---

<article>
  <h1>{post.data.title}</h1>
  <p>
    <strong>🗓️ Publicado em:</strong>
    {new Date(post.data.date).toLocaleDateString("pt-BR")}
  </p>
  {
    post.data.images && post.data.images.length > 0 && (
      <img src={post.data.images[0]} alt="Imagem do post" />
    )
  }
  <p>{post.body}</p>
  <a href="/blog">← Voltar para o Blog</a>
</article>
